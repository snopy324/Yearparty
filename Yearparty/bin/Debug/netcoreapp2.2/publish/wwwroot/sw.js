var CACHE_NAME = 'my-site-cache-v1';
var urlsToCache = [
  '/photos/1.png',
  '/photos/152.png',
  '/photos/303.png',
  '/photos/454.png',
  '/photos/605.png',
  '/photos/756.png',
  '/photos/907.png',
  '/photos/1058.png',
  '/photos/1209.png',
  '/photos/1360.png',
  '/photos/1511.png',
  '/photos/1662.png',
  '/photos/1813.png',
  '/photos/1964.png',
  '/photos/2115.png',
  '/photos/2266.png',
  '/photos/2417.png',
  '/photos/2568.png',
  '/photos/2719.png',
  '/photos/2870.png',
  '/photos/3021.png',
  '/photos/3172.png',
  '/photos/3323.png',
  '/photos/3474.png',
  '/photos/3625.png',
  '/photos/3776.png',
  '/photos/3927.png',
  '/photos/4078.png',
  '/photos/4229.png',
  '/photos/4380.png',
  '/photos/4531.png',
  '/photos/4682.png',
  '/photos/4833.png',
  '/photos/4984.png',
  '/photos/5135.png',
  '/photos/5286.png',
  '/photos/5437.png',
  '/photos/5588.png',
  '/photos/5739.png',
  '/photos/5890.png',
  '/photos/6041.png',
  '/photos/6192.png',
  '/photos/6343.png',
  '/photos/6494.png',
  '/photos/6645.png',
  '/photos/6796.png',
  '/photos/6947.png',
  '/photos/7098.png',
  '/photos/7249.png',
  '/photos/7400.png',
  '/photos/7551.png',
  '/photos/7702.png',
  '/photos/7853.png',
  '/photos/8004.png',
  '/photos/8155.png',
  '/photos/8306.png',
  '/photos/8457.png',
  '/photos/8608.png',
  '/photos/8759.png',
  '/photos/8910.png',
  '/photos/9061.png',
  '/photos/9212.png',
  '/photos/9363.png',
  '/photos/9514.png',
  '/photos/9665.png',
  '/photos/9816.png',
  '/photos/9967.png',
  '/photos/10118.png',
  '/photos/10269.png',
  '/photos/10420.png',
  '/photos/10571.png',
  '/photos/10722.png',
  '/photos/10873.png',
  '/photos/11024.png',
  '/photos/11175.png',
  '/photos/11326.png',
  '/photos/11477.png',
  '/photos/11628.png',
  '/photos/11779.png',
  '/photos/11930.png',
  '/photos/12081.png',
  '/photos/12232.png',
  '/photos/12383.png',
  '/photos/12534.png',
  '/photos/12685.png',
  '/photos/12836.png',
  '/photos/12987.png',
  '/photos/13138.png',
  '/photos/13289.png',
  '/photos/13440.png',
  '/photos/13591.png',
  '/photos/13742.png',
  '/photos/13893.png',
  '/photos/14044.png',
  '/photos/14195.png',
  '/photos/14346.png',
  '/photos/14497.png',
  '/photos/14648.png',
  '/photos/14799.png',
  '/photos/14950.png',
  '/photos/15101.png',
  '/photos/15252.png',
  '/photos/15403.png',
  '/photos/15554.png',
  '/photos/15705.png',
  '/photos/15856.png',
  '/photos/16007.png',
  '/photos/16158.png',
  '/photos/16309.png',
  '/photos/16460.png',
  '/photos/16611.png',
  '/photos/16762.png',
  '/photos/16913.png',
  '/photos/17064.png',
  '/photos/17215.png',
  '/photos/17366.png',
  '/photos/17517.png',
  '/photos/17668.png',
  '/photos/17819.png',
  '/photos/17970.png',
  '/photos/18121.png',
  '/photos/18272.png',
  '/photos/18423.png',
  '/photos/18574.png',
  '/photos/18725.png',
  '/photos/18876.png',
  '/photos/19027.png',
  '/photos/19178.png',
  '/photos/19329.png',
  '/photos/19480.png',
  '/photos/19631.png',
  '/photos/19782.png',
  '/photos/19933.png',
  '/photos/20084.png',
  '/photos/20235.png',
  '/photos/20386.png',
  '/photos/20537.png',
  '/photos/20688.png',
  '/photos/20839.png',
  '/photos/20990.png',
  '/photos/21141.png',
  '/photos/21292.png',
  '/photos/21443.png',
  '/photos/21594.png',
  '/photos/21745.png',
  '/photos/21896.png',
  '/photos/22047.png',
  '/photos/22198.png',
  '/photos/22349.png',
  '/photos/22500.png',
  '/photos/22651.png',
  '/photos/22802.png',
  '/photos/22953.png',
  '/photos/23104.png',
  '/photos/23255.png',
  '/photos/23406.png',
  '/photos/23557.png',
  '/photos/23708.png',
  '/photos/23859.png',
  '/photos/24010.png',
  '/photos/24161.png',
  '/photos/24312.png',
  '/photos/24463.png',
  '/photos/24614.png',
  '/photos/24765.png',
  '/photos/24916.png',
  '/photos/25067.png',
  '/photos/25218.png',
  '/photos/25369.png',
  '/photos/25520.png',
  '/photos/25671.png',
  '/photos/25822.png',
  '/photos/25973.png',
  '/photos/26124.png',
  '/photos/26275.png',
  '/photos/26426.png',
  '/photos/26577.png',
  '/photos/26728.png',
  '/photos/26879.png',
  '/photos/27030.png',
  '/photos/27181.png',
  '/photos/27332.png',
  '/photos/27483.png',
  '/photos/27634.png',
  '/photos/27785.png',
  '/photos/27936.png',
  '/photos/28087.png',
  '/photos/28238.png',
  '/photos/28389.png',
  '/photos/28540.png',
  '/photos/28691.png',
  '/photos/28842.png',
  '/photos/28993.png',
  '/photos/29144.png',
  '/photos/29295.png',
  '/photos/29446.png',
  '/photos/29597.png',
  '/photos/29748.png',
  '/photos/29899.png',
  '/photos/30050.png',
  '/photos/30201.png',
  '/photos/30352.png',
  '/photos/30503.png',
  '/photos/30654.png',
  '/photos/30805.png',
  '/photos/30956.png',
  '/photos/31107.png',
  '/photos/31258.png',
  '/photos/31409.png',
  '/photos/31560.png',
  '/photos/31711.png',
  '/photos/31862.png',
  '/photos/32013.png',
  '/photos/32164.png',
  '/photos/32315.png',
  '/photos/32466.png',
  '/photos/32617.png',
  '/photos/32768.png',
  '/photos/32919.png',
  '/photos/33070.png',
  '/photos/33221.png',
  '/photos/33372.png',
  '/photos/33523.png',
  '/photos/33674.png',
  '/photos/33825.png',
  '/photos/33976.png',
  '/photos/34127.png',
  '/photos/34278.png',
  '/photos/34429.png',
  '/photos/34580.png',
  '/photos/34731.png',
  '/photos/34882.png',
  '/photos/35033.png',
  '/photos/35184.png',
  '/photos/35335.png',
  '/photos/35486.png',
  '/photos/35637.png',
  '/photos/35788.png',
  '/photos/35939.png',
  '/photos/36090.png',
  '/photos/36241.png',
  '/photos/36392.png',
  '/photos/36543.png',
  '/photos/36694.png',
  '/photos/36845.png',
  '/photos/36996.png',
  '/photos/37147.png',
  '/photos/37298.png',
  '/photos/37449.png',
  '/photos/37600.png',
  '/photos/37751.png',
  '/photos/37902.png',
  '/photos/38053.png',
  '/photos/38204.png',
  '/photos/38355.png',
  '/photos/38506.png',
  '/photos/38657.png',
  '/photos/38808.png',
  '/photos/38959.png',
  '/photos/39110.png',
  '/photos/39261.png',
  '/photos/39412.png',
  '/photos/39563.png',
  '/photos/39714.png',
  '/photos/39865.png',
  '/photos/40016.png',
  '/photos/40167.png',
  '/photos/40318.png',
  '/photos/40469.png',
  '/photos/40620.png',
  '/photos/40771.png',
  '/photos/40922.png',
  '/photos/41073.png',
  '/photos/41224.png',
  '/photos/41375.png',
  '/photos/41526.png',
  '/photos/41677.png',
  '/photos/41828.png',
  '/photos/41979.png',
  '/photos/42130.png',
  '/photos/42281.png',
  '/photos/42432.png',
  '/photos/42583.png',
  '/photos/42734.png',
  '/photos/42885.png',
  '/photos/43036.png',
  '/photos/43187.png',
  '/photos/43338.png',
  '/photos/43489.png',
  '/photos/43640.png',
  '/photos/43791.png',
  '/photos/43942.png',
  '/photos/44093.png',
  '/photos/44244.png',
  '/photos/44395.png',
  '/photos/44546.png',
  '/photos/44697.png',
  '/photos/44848.png',
  '/photos/44999.png',
  '/photos/45150.png',
  '/photos/45301.png',
  '/photos/45452.png',
  '/photos/45603.png',
  '/photos/45754.png',
  '/photos/45905.png',
  '/photos/46056.png',
  '/photos/46207.png',
  '/photos/46358.png',
  '/photos/46509.png',
  '/photos/46660.png',
  '/photos/46811.png',
  '/photos/46962.png',
  '/photos/47113.png',
  '/photos/47264.png',
  '/photos/47415.png',
  '/photos/47566.png',
  '/photos/47717.png',
  '/photos/47868.png',
  '/photos/48019.png',
  '/photos/48170.png',
  '/photos/48321.png',
  '/photos/48472.png',
  '/photos/48623.png',
  '/photos/48774.png',
  '/photos/48925.png',
  '/photos/49076.png',
  '/photos/49227.png',
  '/photos/49378.png',
  '/photos/49529.png',
  '/photos/49680.png',
  '/photos/49831.png',
  '/photos/49982.png',
  '/photos/50133.png',
  '/photos/50284.png',
  '/photos/50435.png',
  '/photos/50586.png',
  '/photos/50737.png',
  '/photos/50888.png',
  '/photos/51039.png',
  '/photos/51190.png',
  '/photos/51341.png',
  '/photos/51492.png',
  '/photos/51643.png',
  '/photos/51794.png',
  '/photos/51945.png',
  '/photos/52096.png',
  '/photos/52247.png',
  '/photos/52398.png',
  '/photos/52549.png',
  '/photos/52700.png',
  '/photos/52851.png',
  '/photos/53002.png',
  '/photos/53153.png',
  '/photos/53304.png',
  '/photos/53455.png',
  '/photos/53606.png',
  '/photos/53757.png',
  '/photos/53908.png',
  '/photos/54059.png',
  '/photos/54210.png',
  '/photos/54361.png',
  '/photos/54512.png',
  '/photos/54663.png',
  '/photos/54814.png',
  '/photos/54965.png',
  '/photos/55116.png',
  '/photos/55267.png',
  '/photos/55418.png',
  '/photos/55569.png',
  '/photos/55720.png',
  '/photos/55871.png',
  '/photos/56022.png',
  '/photos/56173.png',
  '/photos/56324.png',
  '/photos/56475.png',
  '/photos/56626.png',
  '/photos/56777.png',
  '/photos/56928.png',
  '/photos/57079.png',
  '/photos/57230.png',
  '/photos/57381.png',
  '/photos/57532.png',
  '/photos/57683.png',
  '/photos/57834.png',
  '/photos/57985.png',
  '/photos/58136.png',
  '/photos/58287.png',
  '/photos/58438.png',
  '/photos/58589.png',
  '/photos/58740.png',
  '/photos/58891.png',
  '/photos/59042.png',
  '/photos/59193.png',
  '/photos/59344.png',
  '/photos/59495.png',
  '/photos/59646.png',
  '/photos/59797.png',
  '/photos/59948.png',
  '/photos/60099.png',
  '/photos/60250.png',
  '/photos/60401.png',
  '/photos/60552.png',
  '/photos/60703.png',
  '/photos/60854.png',
  '/photos/61005.png',
  '/photos/61156.png',
  '/photos/61307.png',
  '/photos/61458.png',
  '/photos/61609.png',
  '/photos/61760.png',
  '/photos/61911.png',
  '/photos/62062.png',
  '/photos/62213.png',
  '/photos/62364.png',
  '/photos/62515.png',
  '/photos/62666.png',
  '/photos/62817.png',
  '/photos/62968.png',
  '/photos/63119.png',
  '/photos/63270.png',
  '/photos/63421.png',
  '/photos/63572.png',
  '/photos/63723.png',
  '/photos/63874.png',
  '/photos/64025.png',
  '/photos/64176.png',
  '/photos/64327.png',
  '/photos/64478.png',
  '/photos/64629.png',
  '/photos/64780.png',
  '/photos/64931.png',
  '/photos/65082.png',
  '/photos/65233.png',
  '/photos/65384.png',
  '/photos/65535.png',
  '/photos/65686.png',
  '/photos/65837.png',
  '/photos/65988.png',
  '/photos/66139.png',
  '/photos/66290.png',
  '/photos/66441.png',
  '/photos/66592.png',
  '/photos/66743.png',
  '/photos/66894.png',
  '/photos/67045.png',
  '/photos/67196.png',
  '/photos/67347.png',
  '/photos/67498.png',
  '/photos/67649.png',
  '/photos/67800.png',
  '/photos/67951.png',
  '/photos/68102.png',
  '/photos/68253.png',
  '/photos/68404.png',
  '/photos/68555.png',
  '/photos/68706.png',
  '/photos/68857.png',
  '/photos/69008.png',
  '/photos/69159.png',
  '/photos/69310.png',
  '/photos/69461.png',
  '/photos/69612.png',
  '/photos/69763.png',
  '/photos/69914.png',
  '/photos/70065.png',
  '/photos/70216.png',
  '/photos/70367.png',
  '/photos/70518.png',
  '/photos/70669.png',
  '/photos/70820.png',
  '/photos/70971.png',
  '/photos/71122.png',
  '/photos/71273.png',
  '/photos/71424.png',
  '/photos/71575.png',
  '/photos/71726.png',
  '/photos/71877.png',
  '/photos/72028.png',
  '/photos/72179.png',
  '/photos/72330.png',
  '/photos/72481.png',
  '/photos/72632.png',
  '/photos/72783.png',
  '/photos/72934.png',
  '/photos/73085.png',
  '/photos/73236.png',
  '/photos/73387.png',
  '/photos/73538.png',
  '/photos/73689.png',
  '/photos/73840.png',
  '/photos/73991.png',
  '/photos/74142.png',
  '/photos/74293.png',
  '/photos/74444.png',
  '/photos/74595.png',
  '/photos/74746.png',
  '/photos/74897.png',
  '/photos/75048.png',
  '/photos/75199.png',
  '/photos/75350.png',
  ];

self.addEventListener('install', function (evt) {
  // Perform install steps
  evt.waitUntil(
    caches.open(CACHE_NAME)
      .then(function (cache) {
        console.log('Opened cache');
        return cache.addAll(urlsToCache);
      })
  );
});


self.addEventListener('fetch', function (evt) {

  if (evt.request.url.includes('/photos/')) {
    console.log('[Service Worker] Fetch (data)', evt.request.url);
    evt.respondWith(
      caches.open(CACHE_NAME).then((cache) => {
        return fetch(evt.request)
          .then((response) => {
            // If the response was good, clone it and store it in the cache.
            if (response.status === 200) {
              cache.put(evt.request.url, response.clone());
            }
            return response;
          }).catch((err) => {
            // Network request failed, try to get it from the cache.
            return cache.match(evt.request);
          });
      }));
    return;
  }

  evt.respondWith(
    caches.open(CACHE_NAME).then((cache) => {
      return cache.match(evt.request)
        .then((response) => {
          return response || fetch(evt.request);
        });
    })
  );
});


self.addEventListener('activate', (evt) => {
  console.log('[ServiceWorker] Activate');
  // CODELAB: Remove previous cached data from disk.
  evt.waitUntil(
    caches.keys().then((keyList) => {
      return Promise.all(keyList.map((key) => {
        if (key !== CACHE_NAME) {
          console.log('[ServiceWorker] Removing old cache', key);
          return caches.delete(key);
        }
      }));
    })
  );
  self.clients.claim();
});
